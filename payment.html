<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ”¯ä»˜å¤„ç† - ç”µå­å•†åŠ¡å¹³å°</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .payment-container {
            max-width: 1000px;
            margin: 50px auto;
            padding: 0;
            display: flex;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .payment-steps {
            width: 300px;
            background-color: #f8f9fa;
            padding: 30px;
        }
        
        .payment-step {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            opacity: 0.5;
            transition: opacity 0.3s;
        }
        
        .payment-step.active {
            opacity: 1;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ddd;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .payment-step.active .step-number,
        .payment-step.completed .step-number {
            background-color: #4a90e2;
        }
        
        .payment-step.completed .step-number::after {
            content: 'âœ“';
        }
        
        .step-label {
            font-weight: 600;
            color: #333;
        }
        
        .payment-content {
            flex: 1;
            padding: 40px;
            background-color: #fff;
        }
        
        .payment-section {
            display: none;
        }
        
        .payment-section.active {
            display: block;
        }
        
        .section-title {
            font-size: 24px;
            margin-bottom: 25px;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        
        .order-summary {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .order-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .order-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .item-image {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            overflow: hidden;
            margin-right: 15px;
        }
        
        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .item-details {
            flex: 1;
        }
        
        .item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .item-price {
            color: #e74c3c;
            font-weight: 600;
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 600;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }
        
        .payment-methods {
            margin-top: 30px;
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-method:hover {
            border-color: #4a90e2;
        }
        
        .payment-method.selected {
            border-color: #4a90e2;
            background-color: #f0f7ff;
        }
        
        .payment-method-icon {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #4a90e2;
        }
        
        .payment-method-details {
            flex: 1;
        }
        
        .payment-method-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .payment-method-description {
            font-size: 14px;
            color: #666;
        }
        
        .payment-method-radio {
            margin-left: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .card-icons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .card-icon {
            width: 40px;
            height: 25px;
            border-radius: 4px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .card-icon.visa {
            background-color: #1a1f71;
            color: white;
        }
        
        .card-icon.mastercard {
            background-color: #eb001b;
            color: white;
        }
        
        .card-icon.amex {
            background-color: #006fcf;
            color: white;
        }
        
        .card-icon.unionpay {
            background-color: #e21836;
            color: white;
        }
        
        .payment-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn-back {
            padding: 12px 25px;
            background-color: #f0f0f0;
            color: #333;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn-back:hover {
            background-color: #e0e0e0;
        }
        
        .btn-next {
            padding: 12px 25px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn-next:hover {
            background-color: #3a7bc8;
        }
        
        .payment-success {
            text-align: center;
            padding: 40px 0;
        }
        
        .success-icon {
            width: 80px;
            height: 80px;
            background-color: #27ae60;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 40px;
        }
        
        .success-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #27ae60;
        }
        
        .success-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
        }
        
        .order-details {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .detail-label {
            font-weight: 600;
            color: #666;
        }
        
        .detail-value {
            font-weight: 600;
            color: #333;
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #666;
            border: 1px solid #ddd;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .payment-container {
                flex-direction: column;
            }
            
            .payment-steps {
                width: 100%;
                padding: 20px;
            }
            
            .payment-content {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1>ç”µå­å•†åŠ¡å¹³å°</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">é¦–é¡µ</a></li>
                    <li><a href="product-detail.html">äº§å“</a></li>
                    <li><a href="news-detail.html">æ–°é—»</a></li>
                    <li><a href="cart.html">è´­ç‰©è½¦</a></li>
                    <li><a href="login.html">ç™»å½•/æ³¨å†Œ</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="payment-container">
                <div class="payment-steps">
                    <div class="payment-step active" data-step="order-summary">
                        <div class="step-number">1</div>
                        <div class="step-label">è®¢å•ç¡®è®¤</div>
                    </div>
                    <div class="payment-step" data-step="payment-method">
                        <div class="step-number">2</div>
                        <div class="step-label">æ”¯ä»˜æ–¹å¼</div>
                    </div>
                    <div class="payment-step" data-step="payment-details">
                        <div class="step-number">3</div>
                        <div class="step-label">æ”¯ä»˜è¯¦æƒ…</div>
                    </div>
                    <div class="payment-step" data-step="payment-confirmation">
                        <div class="step-number">4</div>
                        <div class="step-label">æ”¯ä»˜ç¡®è®¤</div>
                    </div>
                </div>
                
                <div class="payment-content">
                    <!-- è®¢å•ç¡®è®¤ -->
                    <div class="payment-section active" id="order-summary">
                        <h2 class="section-title">è®¢å•ç¡®è®¤</h2>
                        
                        <div class="order-summary">
                            <div class="order-item">
                                <div class="item-image" id="product-image-1">
                                    <!-- å›¾ç‰‡å°†ç”±JSç”Ÿæˆ -->
                                </div>
                                <div class="item-details">
                                    <div class="item-name">Gmailè´¦å· - é«˜çº§ç‰ˆ</div>
                                    <div class="item-description">åŒ…å«é¢å¤–å­˜å‚¨ç©ºé—´å’Œé«˜çº§åŠŸèƒ½</div>
                                    <div class="item-price">Â¥99.00</div>
                                </div>
                            </div>
                            
                            <div class="order-total">
                                <span>æ€»è®¡ï¼š</span>
                                <span>Â¥99.00</span>
                            </div>
                        </div>
                        
                        <div class="payment-actions">
                            <a href="cart.html" class="btn-back">è¿”å›è´­ç‰©è½¦</a>
                            <button class="btn-next" data-next="payment-method">é€‰æ‹©æ”¯ä»˜æ–¹å¼</button>
                        </div>
                    </div>
                    
                    <!-- æ”¯ä»˜æ–¹å¼ -->
                    <div class="payment-section" id="payment-method">
                        <h2 class="section-title">é€‰æ‹©æ”¯ä»˜æ–¹å¼</h2>
                        
                        <div class="payment-methods">
                            <div class="payment-method" data-method="alipay">
                                <div class="payment-method-icon">ğŸ’°</div>
                                <div class="payment-method-details">
                                    <div class="payment-method-name">æ”¯ä»˜å®</div>
                                    <div class="payment-method-description">ä½¿ç”¨æ”¯ä»˜å®æ‰«ç æ”¯ä»˜</div>
                                </div>
                                <input type="radio" name="payment-method" class="payment-method-radio" value="alipay">
                            </div>
                            
                            <div class="payment-method" data-method="wechat">
                                <div class="payment-method-icon">ğŸ“±</div>
                                <div class="payment-method-details">
                                    <div class="payment-method-name">å¾®ä¿¡æ”¯ä»˜</div>
                                    <div class="payment-method-description">ä½¿ç”¨å¾®ä¿¡æ‰«ç æ”¯ä»˜</div>
                                </div>
                                <input type="radio" name="payment-method" class="payment-method-radio" value="wechat">
                            </div>
                            
                            <div class="payment-method" data-method="credit-card">
                                <div class="payment-method-icon">ğŸ’³</div>
                                <div class="payment-method-details">
                                    <div class="payment-method-name">ä¿¡ç”¨å¡æ”¯ä»˜</div>
                                    <div class="payment-method-description">ä½¿ç”¨Visaã€Mastercardã€é“¶è”ç­‰ä¿¡ç”¨å¡æ”¯ä»˜</div>
                                </div>
                                <input type="radio" name="payment-method" class="payment-method-radio" value="credit-card">
                            </div>
                        </div>
                        
                        <div class="payment-actions">
                            <button class="btn-back" data-prev="order-summary">è¿”å›è®¢å•ç¡®è®¤</button>
                            <button class="btn-next" data-next="payment-details" disabled>ç»§ç»­</button>
                        </div>
                    </div>
                    
                    <!-- æ”¯ä»˜è¯¦æƒ… -->
                    <div class="payment-section" id="payment-details">
                        <h2 class="section-title">æ”¯ä»˜è¯¦æƒ…</h2>
                        
                        <!-- ä¿¡ç”¨å¡æ”¯ä»˜è¡¨å• -->
                        <div class="payment-form credit-card-form" style="display: none;">
                            <div class="card-icons">
                                <div class="card-icon visa">VISA</div>
                                <div class="card-icon mastercard">MC</div>
                                <div class="card-icon amex">AMEX</div>
                                <div class="card-icon unionpay">UP</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="card-number">å¡å·</label>
                                <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19">
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="card-expiry">æœ‰æ•ˆæœŸ (MM/YY)</label>
                                    <input type="text" id="card-expiry" placeholder="MM/YY" maxlength="5">
                                </div>
                                
                                <div class="form-group">
                                    <label for="card-cvv">å®‰å…¨ç </label>
                                    <input type="text" id="card-cvv" placeholder="CVV" maxlength="4">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="card-name">æŒå¡äººå§“å</label>
                                <input type="text" id="card-name" placeholder="æŒå¡äººå§“å">
                            </div>
                        </div>
                        
                        <!-- æ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜äºŒç»´ç  -->
                        <div class="qr-payment-form" style="display: none;">
                            <p style="text-align: center; margin-bottom: 20px;">è¯·ä½¿ç”¨<span class="payment-method-name-display">æ”¯ä»˜å®</span>æ‰«æä»¥ä¸‹äºŒç»´ç å®Œæˆæ”¯ä»˜</p>
                            
                            <div class="qr-code" id="payment-qr-code">
                                äºŒç»´ç å°†åœ¨è¿™é‡Œæ˜¾ç¤º
                            </div>
                            
                            <p style="text-align: center; margin-top: 20px;">æ”¯ä»˜é‡‘é¢: <strong>Â¥99.00</strong></p>
                        </div>
                        
                        <div class="payment-actions">
                            <button class="btn-back" data-prev="payment-method">è¿”å›æ”¯ä»˜æ–¹å¼</button>
                            <button class="btn-next" data-next="payment-confirmation">ç¡®è®¤æ”¯ä»˜</button>
                        </div>
                    </div>
                    
                    <!-- æ”¯ä»˜ç¡®è®¤ -->
                    <div class="payment-section" id="payment-confirmation">
                        <div class="payment-success">
                            <div class="success-icon">âœ“</div>
                            <h2 class="success-title">æ”¯ä»˜æˆåŠŸï¼</h2>
                            <p class="success-message">æ‚¨çš„è®¢å•å·²ç»æˆåŠŸæ”¯ä»˜ï¼Œæˆ‘ä»¬å°†ç«‹å³å¤„ç†æ‚¨çš„è®¢å•ã€‚</p>
                            
                            <div class="order-details">
                                <h3 style="margin-top: 0; margin-bottom: 15px;">è®¢å•è¯¦æƒ…</h3>
                                
                                <div class="detail-row">
                                    <span class="detail-label">è®¢å•ç¼–å·ï¼š</span>
                                    <span class="detail-value" id="order-number">ORD20230001</span>
                                </div>
                                
                                <div class="detail-row">
                                    <span class="detail-label">æ”¯ä»˜æ–¹å¼ï¼š</span>
                                    <span class="detail-value" id="payment-method-display">ä¿¡ç”¨å¡</span>
                                </div>
                                
                                <div class="detail-row">
                                    <span class="detail-label">æ”¯ä»˜é‡‘é¢ï¼š</span>
                                    <span class="detail-value">Â¥99.00</span>
                                </div>
                                
                                <div class="detail-row">
                                    <span class="detail-label">æ”¯ä»˜æ—¶é—´ï¼š</span>
                                    <span class="detail-value" id="payment-time">2023-06-15 14:30:45</span>
                                </div>
                            </div>
                            
                            <p>æˆ‘ä»¬å·²å°†è®¢å•ç¡®è®¤é‚®ä»¶å‘é€è‡³æ‚¨çš„é‚®ç®±ï¼Œè¯·æ³¨æ„æŸ¥æ”¶ã€‚</p>
                            
                            <div style="margin-top: 30px;">
                                <a href="index.html" class="btn-next">è¿”å›é¦–é¡µ</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>å…³äºæˆ‘ä»¬</h3>
                    <p>æˆ‘ä»¬æ˜¯ä¸€å®¶ä¸“æ³¨äºæä¾›é«˜è´¨é‡äº§å“çš„ç”µå­å•†åŠ¡å¹³å°ã€‚</p>
                </div>
                <div class="footer-section">
                    <h3>è”ç³»æ–¹å¼</h3>
                    <p>ç”µå­é‚®ä»¶ï¼šinfo@example.com</p>
                    <p>ç”µè¯ï¼š+123 456 7890</p>
                </div>
                <div class="footer-section">
                    <h3>å…³æ³¨æˆ‘ä»¬</h3>
                    <div class="social-icons">
                        <a href="#">å¾®åš</a>
                        <a href="#">å¾®ä¿¡</a>
                        <a href="#">æŠ–éŸ³</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 ç”µå­å•†åŠ¡å¹³å°. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="images.js"></script>
    <script src="image-generator.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ç”Ÿæˆäº§å“å›¾ç‰‡
            const productImage = document.getElementById('product-image-1');
            if (productImage) {
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('width', '100%');
                svg.setAttribute('height', '100%');
                svg.setAttribute('viewBox', '0 0 80 80');
                svg.style.display = 'block';
                
                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                rect.setAttribute('width', '80');
                rect.setAttribute('height', '80');
                rect.setAttribute('fill', '#3498db');
                svg.appendChild(rect);
                
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', '40');
                text.setAttribute('y', '40');
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('dominant-baseline', 'middle');
                text.setAttribute('fill', 'white');
                text.setAttribute('font-family', 'Arial, sans-serif');
                text.setAttribute('font-size', '16');
                text.textContent = 'Gmail';
                svg.appendChild(text);
                
                productImage.appendChild(svg);
            }
            
            // ç”Ÿæˆéšæœºè®¢å•å·
            const orderNumber = document.getElementById('order-number');
            if (orderNumber) {
                const randomNum = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
                orderNumber.textContent = `ORD2023${randomNum}`;
            }
            
            // è®¾ç½®å½“å‰æ—¶é—´
            const paymentTime = document.getElementById('payment-time');
            if (paymentTime) {
                const now = new Date();
                const year = now.getFullYear();
                const month = (now.getMonth() + 1).toString().padStart(2, '0');
                const day = now.getDate().toString().padStart(2, '0');
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const seconds = now.getSeconds().toString().padStart(2, '0');
                
                paymentTime.textContent = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
            }
            
            // æ”¯ä»˜æ–¹å¼é€‰æ‹©
            const paymentMethods = document.querySelectorAll('.payment-method');
            const nextButton = document.querySelector('#payment-method .btn-next');
            let selectedMethod = '';
            
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
                    paymentMethods.forEach(m => m.classList.remove('selected'));
                    
                    // è®¾ç½®å½“å‰é€‰ä¸­çŠ¶æ€
                    this.classList.add('selected');
                    
                    // é€‰ä¸­å¯¹åº”çš„å•é€‰æŒ‰é’®
                    const radio = this.querySelector('input[type="radio"]');
                    radio.checked = true;
                    
                    // å¯ç”¨ä¸‹ä¸€æ­¥æŒ‰é’®
                    nextButton.disabled = false;
                    
                    // ä¿å­˜é€‰ä¸­çš„æ”¯ä»˜æ–¹å¼
                    selectedMethod = this.getAttribute('data-method');
                });
            });
            
            // æ­¥éª¤å¯¼èˆª
            const nextButtons = document.querySelectorAll('.btn-next[data-next]');
            const backButtons = document.querySelectorAll('.btn-back[data-prev]');
            const steps = document.querySelectorAll('.payment-step');
            const sections = document.querySelectorAll('.payment-section');
            
            nextButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const nextStep = this.getAttribute('data-next');
                    
                    // å¦‚æœæ˜¯ä»æ”¯ä»˜æ–¹å¼åˆ°æ”¯ä»˜è¯¦æƒ…ï¼Œæ ¹æ®é€‰æ‹©çš„æ”¯ä»˜æ–¹å¼æ˜¾ç¤ºä¸åŒçš„è¡¨å•
                    if (nextStep === 'payment-details') {
                        const creditCardForm = document.querySelector('.credit-card-form');
                        const qrPaymentForm = document.querySelector('.qr-payment-form');
                        const paymentMethodNameDisplay = document.querySelector('.payment-method-name-display');
                        
                        if (selectedMethod === 'credit-card') {
                            creditCardForm.style.display = 'block';
                            qrPaymentForm.style.display = 'none';
                        } else {
                            creditCardForm.style.display = 'none';
                            qrPaymentForm.style.display = 'block';
                            
                            // è®¾ç½®æ”¯ä»˜æ–¹å¼åç§°
                            if (selectedMethod === 'alipay') {
                                paymentMethodNameDisplay.textContent = 'æ”¯ä»˜å®';
                            } else if (selectedMethod === 'wechat') {
                                paymentMethodNameDisplay.textContent = 'å¾®ä¿¡';
                            }
                            
                            // ç”ŸæˆäºŒç»´ç 
                            const qrCode = document.getElementById('payment-qr-code');
                            qrCode.innerHTML = '';
                            
                            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                            svg.setAttribute('width', '100%');
                            svg.setAttribute('height', '100%');
                            svg.setAttribute('viewBox', '0 0 200 200');
                            
                            // èƒŒæ™¯
                            const bg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                            bg.setAttribute('width', '200');
                            bg.setAttribute('height', '200');
                            bg.setAttribute('fill', 'white');
                            svg.appendChild(bg);
                            
                            // ç®€å•çš„äºŒç»´ç å›¾æ¡ˆ
                            for (let i = 0; i < 8; i++) {
                                for (let j = 0; j < 8; j++) {
                                    if (Math.random() > 0.5) {
                                        const cell = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                                        cell.setAttribute('x', 20 + i * 20);
                                        cell.setAttribute('y', 20 + j * 20);
                                        cell.setAttribute('width', '20');
                                        cell.setAttribute('height', '20');
                                        cell.setAttribute('fill', 'black');
                                        svg.appendChild(cell);
                                    }
                                }
                            }
                            
                            // æ·»åŠ å®šä½å›¾æ¡ˆ
                            const patterns = [
                                [0, 0],
                                [0, 7],
                                [7, 0]
                            ];
                            
                            patterns.forEach(([x, y]) => {
                                // å¤–æ¡†
                                const outer = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                                outer.setAttribute('x', 20 + x * 20);
                                outer.setAttribute('y', 20 + y * 20);
                                outer.setAttribute('width', '20');
                                outer.setAttribute('height', '20');
                                outer.setAttribute('fill', 'black');
                                svg.appendChild(outer);
                                
                                // å†…æ¡†
                                const inner = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                                inner.setAttribute('x', 25 + x * 20);
                                inner.setAttribute('y', 25 + y * 20);
                                inner.setAttribute('width', '10');
                                inner.setAttribute('height', '10');
                                inner.setAttribute('fill', 'white');
                                svg.appendChild(inner);
                                
                                // ä¸­å¿ƒç‚¹
                                const center = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                                center.setAttribute('x', 28 + x * 20);
                                center.setAttribute('y', 28 + y * 20);
                                center.setAttribute('width', '4');
                                center.setAttribute('height', '4');
                                center.setAttribute('fill', 'black');
                                svg.appendChild(center);
                            });
                            
                            qrCode.appendChild(svg);
                        }
                        
                        // è®¾ç½®æ”¯ä»˜ç¡®è®¤é¡µé¢çš„æ”¯ä»˜æ–¹å¼æ˜¾ç¤º
                        const paymentMethodDisplay = document.getElementById('payment-method-display');
                        if (selectedMethod === 'credit-card') {
                            paymentMethodDisplay.textContent = 'ä¿¡ç”¨å¡';
                        } else if (selectedMethod === 'alipay') {
                            paymentMethodDisplay.textContent = 'æ”¯ä»˜å®';
                        } else if (selectedMethod === 'wechat') {
                            paymentMethodDisplay.textContent = 'å¾®ä¿¡æ”¯ä»˜';
                        }
                    }
                    
                    // éšè—æ‰€æœ‰éƒ¨åˆ†
                    sections.forEach(section => section.classList.remove('active'));
                    
                    // æ˜¾ç¤ºç›®æ ‡éƒ¨åˆ†
                    document.getElementById(nextStep).classList.add('active');
                    
                    // æ›´æ–°æ­¥éª¤çŠ¶æ€
                    steps.forEach(step => {
                        if (step.getAttribute('data-step') === nextStep) {
                            step.classList.add('active');
                            
                            // å°†ä¹‹å‰çš„æ­¥éª¤æ ‡è®°ä¸ºå·²å®Œæˆ
                            let prevStep = step.previousElementSibling;
                            while (prevStep) {
                                prevStep.classList.add('completed');
                                prevStep = prevStep.previousElementSibling;
                            }
                        }
                    });
                });
            });
            
            backButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const prevStep = this.getAttribute('data-prev');
                    
                    // éšè—æ‰€æœ‰éƒ¨åˆ†
                    sections.forEach(section => section.classList.remove('active'));
                    
                    // æ˜¾ç¤ºç›®æ ‡éƒ¨åˆ†
                    document.getElementById(prevStep).classList.add('active');
                    
                    // æ›´æ–°æ­¥éª¤çŠ¶æ€
                    steps.forEach(step => {
                        if (step.getAttribute('data-step') === prevStep) {
                            step.classList.add('active');
                            
                            // å°†ä¹‹åçš„æ­¥éª¤æ ‡è®°ä¸ºæœªå®Œæˆ
                            let nextStep = step.nextElementSibling;
                            while (nextStep) {
                                nextStep.classList.remove('active');
                                nextStep.classList.remove('completed');
                                nextStep = nextStep.nextElementSibling;
                            }
                        }
                    });
                });
            });
            
            // ä¿¡ç”¨å¡è¾“å…¥æ ¼å¼åŒ–
            const cardNumberInput = document.getElementById('card-number');
            if (cardNumberInput) {
                cardNumberInput.addEventListener('input', function(e) {
                    // ç§»é™¤éæ•°å­—å­—ç¬¦
                    let value = this.value.replace(/\D/g, '');
                    
                    // æ·»åŠ ç©ºæ ¼
                    let formattedValue = '';
                    for (let i = 0; i < value.length; i++) {
                        if (i > 0 && i % 4 === 0) {
                            formattedValue += ' ';
                        }
                        formattedValue += value[i];
                    }
                    
                    this.value = formattedValue;
                });
            }
            
            const cardExpiryInput = document.getElementById('card-expiry');
            if (cardExpiryInput) {
                cardExpiryInput.addEventListener('input', function(e) {
                    // ç§»é™¤éæ•°å­—å­—ç¬¦
                    let value = this.value.replace(/\D/g, '');
                    
                    // æ·»åŠ æ–œæ 
                    if (value.length > 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2);
                    }
                    
                    this.value = value;
                });
            }
        });
    </script>
</body>
</html>